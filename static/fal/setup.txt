# This template changes TS-config for usage of T3sports with FAL.
# Be sure to include this TS-template AFTER the main TS-template of T3sports.

includeLibs.tx_t3sports_fal = EXT:rn_base/util/class.tx_rnbase_util_TSFAL.php

lib.t3sports.pictures.mediaBase {
  file = IMG_RESOURCE
  file.file.import.field = file
  file.file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_teamPicture}
  file.file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_teamPicture}
  thumbnail < .file
  thumbnail = IMAGE
  thumbnail.file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_teamThumb}
  thumbnail.file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_teamThumb}
  thumbnail.params = border="0"
  thumbnail.titleText.field = title
}


########
# Spiel
########
lib.t3sports.match.pictures >
lib.t3sports.match.firstpicture >

lib.t3sports.match.pictures =< tt_content.image.20
lib.t3sports.match.pictures {
  imgList.field = t3images
  imgPath = uploads/tx_cfcleague/
  # Zoom aktivieren
  1.imageLinkWrap.enable.field = 
  1.imageLinkWrap.enable = 1
  # Anzahl Bilder nebeneinander
  cols.field = 
  cols = 4
}

lib.t3sports.match.firstpicture =< tt_content.image.20
lib.t3sports.match.firstpicture {
  imgList.field = t3images
  imgMax = 1
  imgPath = uploads/tx_cfcleague/
  # Zoom aktivieren
  1.imageLinkWrap.enable.field = 
  1.imageLinkWrap.enable = 1
  maxH = {$plugin.tx_cfcleaguefe_report.maxH_teamPicture}
  maxW = {$plugin.tx_cfcleaguefe_report.maxW_teamPicture}
}


########
# Personen
########
lib.t3sports.profile.pictures {
  userFunc = tx_rnbase_util_TSFAL->printImages
  refField = t3images
}
lib.t3sports.profile.firstpicture {
}

########
# Vereine (FAL fixed)
########
lib.t3sports.club.dam_logo >
lib.t3sports.club.logo >

lib.t3sports.club.logo = IMAGE
lib.t3sports.club.logo {
  file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_logo}
  file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_logo}
	file.import.cObject = USER
	file.import.cObject {
		# Mit dieser Methode wird nur die erste Referenz ausgewertet 
    userFunc=tx_rnbase_util_TSFAL->fetchFirstReference
    refField=logo
    refTable=tx_cfcleague_club
  }
  file.treatIdAsReference = 1
}

########
# Teams (FAL fixed)
########

lib.t3sports.teamLogo.big {
	# render first logo from club record
	0.0.default.conf.tx_cfcleague_club {
		key.field = logo
		default {
			userFunc=tx_rnbase_util_TSFAL->printImages
			refField=logo
		}
	}
	# FAL-Bild anzeigen (Select-Box im Team)
	0.default >
	0.default = IMAGE
	0.default.file {
		treatIdAsReference = 1
		import.field = logo
		maxW = {$plugin.tx_cfcleaguefe_report.maxW_logo}
		maxH = {$plugin.tx_cfcleaguefe_report.maxH_logo}
	}
}
# remove DAM stuff
lib.t3sports.teamLogo.small.0.default.conf >
lib.t3sports.teamLogo.small.0.default.file {
		maxW = {$plugin.tx_cfcleaguefe_competition.maxW_logo_matchtable}
		maxH = {$plugin.tx_cfcleaguefe_competition.maxH_logo_matchtable}
}

lib.t3sports.team.pictures >
lib.t3sports.team.firstpicture >
lib.t3sports.teamSmall.pictures >
lib.t3sports.teamSmall.firstpicture >


lib.t3sports.team.pictures = USER
lib.t3sports.team.pictures {
	userFunc = tx_rnbase_util_TSFAL->printImages
	references {
	  fieldName = t3images
	  table = tx_cfcleague_teams
	}
  refField = t3images
  refTable = tx_cfcleague_teams
  template = EXT:cfc_league_fe/res/lightboxpics.html
  offset = 1
  subpartName = ###PICTURES###
  media =< lib.t3sports.pictures.mediaBase
}

lib.t3sports.team.firstpicture = IMAGE
lib.t3sports.team.firstpicture {
  file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_firstTeamPicture}
  file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_firstTeamPicture}
	file.import.cObject = USER
	file.import.cObject {
		# Mit dieser Methode wird nur die erste Referenz ausgewertet 
    userFunc=tx_rnbase_util_TSFAL->fetchFirstReference
    refField=t3images
    refTable=tx_cfcleague_teams
  }
  file.treatIdAsReference = 1
}



########
# Stadion (FAL fixed)
########
lib.t3sports.stadium.logo >

lib.t3sports.stadium.logo = IMAGE
lib.t3sports.stadium.logo {
  file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_logo}
  file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_logo}
	file.import.cObject = USER
	file.import.cObject {
		# Mit dieser Methode wird nur die erste Referenz ausgewertet 
    userFunc=tx_rnbase_util_TSFAL->fetchFirstReference
    refField=logo
    refTable=tx_cfcleague_stadiums
  }
  file.treatIdAsReference = 1
}


lib.t3sports.stadium.pictures >
lib.t3sports.stadium.pictures = USER
lib.t3sports.stadium.pictures {
	userFunc = tx_rnbase_util_TSFAL->printImages
  refField = pictures
  refTable = tx_cfcleague_stadiums
  template = EXT:cfc_league_fe/res/lightboxpics.html
  subpartName = ###PICTURES###
  media =< lib.t3sports.pictures.mediaBase
}


########
# Competition (FAL fixed)
########
lib.t3sports.competition.logo >
lib.t3sports.competition.logo = IMAGE
lib.t3sports.competition.logo {
	file.maxH = {$plugin.tx_cfcleaguefe_competition.maxW_complogo}
	file.maxW = {$plugin.tx_cfcleaguefe_competition.maxW_complogo}
	file.import.cObject = USER
	file.import.cObject {
		# Mit dieser Methode wird nur die erste Referenz ausgewertet 
		userFunc=tx_rnbase_util_TSFAL->fetchFirstReference
		refField=logo
		refTable=tx_cfcleague_competition
	}
	file.treatIdAsReference = 1
}


########
# Group (FAL fixed)
########
lib.t3sports.group.logo {
	userFunc=tx_rnbase_util_TSFAL->printImages
}
